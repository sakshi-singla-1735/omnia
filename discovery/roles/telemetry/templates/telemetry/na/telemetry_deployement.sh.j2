#!/bin/bash

set -e

# Directory containing all YAML files
MANIFEST_DIR="./k8s-manifests"

# Check if directory exists
if [ ! -d "$MANIFEST_DIR" ]; then
  echo "Directory $MANIFEST_DIR does not exist. Please create it and add your YAML files."
  exit 1
fi

# Apply all YAML files
for file in $MANIFEST_DIR/*.yaml; do
  echo "Applying $file..."
  kubectl apply -f "$file"
done

echo "All Telemetry Kubernetes resources have been deployed."
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "groups": {
      "type": "object",
      "patternProperties": {
        "^grp([1-9][0-9]?|0)$": {
          "type": "object",
          "properties": {
            "location_id": {
              "type": "string",
              "description": "Scalable unit and rack number range is 0-99. Format: SU-<n>.RACK-<n>",
              "pattern": "^(SU-\\d{1,2}\\.RACK-\\d{1,2})$"
            },
            "parent": {
              "type": "string",
              "pattern": "^[a-zA-Z0-9,]*$",
              "description": "List of service tag of associated active service node(s). This field will be mandatory for slurm_node related roles."
            }
          },
          "required": [
            "location_id",
            "parent"
          ]
        }
      },
      "additionalProperties": false
    },
    "functional_groups": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the functional_group, can be any of the following Omnia defined functional_group.",
            "enum": [
              "default_x86_64",
              "service_kube_node_x86_64",
              "service_kube_control_plane_x86_64",
              "service_kube_control_plane_first_x86_64",
              "login_node_x86_64",
              "login_node_aarch64",
              "login_compiler_node_x86_64",
              "login_compiler_node_aarch64",
              "slurm_control_node_x86_64",
              "default_aarch64",
              "slurm_node_x86_64",
              "slurm_node_aarch64"
            ]
          },
          "cluster_name": {
            "type": "string",
            "pattern": "^$|^[a-zA-Z0-9_]+$",
            "description": "Name of the cluster. Mandatory for service and compute kubernetes roles like 'service_kube_node', 'kube_node'."
          },
          "group": {
            "type": "array",
            "description": "List of groups defined by the user",
            "items": {
              "type": "string",
              "pattern": "^grp\\d{1,2}$"
            },
            "minItems": 1,
            "uniqueItems": true
          }
        },
        "required": [
          "name",
          "cluster_name",
          "group"
        ]
      },
      "minItems": 1,
      "uniqueItems": true,
      "maxItems": 100
    }
  },
  "required": [
    "functional_groups",
    "groups"
  ]
}
